# Copyright (c) 2026 khithlainhtet <khithlainhtet>
# Location: myanmar,pyin oo lwin
#
# All rights reserved.
#
# This code is the intellectual property of khithlainhtet.
# You are not allowed to copy, modify, redistribute, or use this
# code for commercial or personal projects without explicit permission.
#
# Allowed:
# - Forking for personal learning
# - Submitting improvements via pull requests
#
# Not Allowed:
# - Claiming this code as your own
# - Re-uploading without credit or permission
# - Selling or using commercially
#
# Contact for permissions:
# Email: bronaing371@gmail.com


from pyrogram import filters
from pyrogram.types import Message
from MYANMARMUSIC import app
import requests
import os

@app.on_message(filters.command("vid"))
async def video_downloader(_, message: Message):
    if len(message.command) < 2:
        return await message.reply_text("âŒ Please provide a video URL.\n\nExample:\n/vid Any_video_url")

    video_url = message.text.split(None, 1)[1]

    msg = await message.reply("ğŸ” Fetching video...")

    # Step 1: Call API
    payload = {
        "url": video_url,
        "token": "c99f113fab0762d216b4545e5c3d615eefb30f0975fe107caab629d17e51b52d"
    }

    headers = {
        "Content-Type": "application/x-www-form-urlencoded",
        "User-Agent": "Mozilla/5.0 (Linux; Android 14)",
    }

    try:
        r = requests.post("https://allvideodownloader.cc/wp-json/aio-dl/video-data/", data=payload, headers=headers)
        data = r.json()

        if "medias" not in data or not data["medias"]:
            return await msg.edit("âŒ No downloadable video found.")

        # Step 2: Get best quality video URL
        best_video = sorted(data["medias"], key=lambda x: x.get("quality", ""), reverse=True)[0]
        video_link = best_video["url"]

        # Step 3: Download the video to temp file
        await msg.edit("â¬‡ï¸ Downloading video...")

        file_name = "video.mp4"
        with requests.get(video_link, stream=True) as v:
            with open(file_name, "wb") as f:
                for chunk in v.iter_content(chunk_size=8192):
                    f.write(chunk)

        # Step 4: Send video to user
        await app.send_video(
            chat_id=message.chat.id,
            video=file_name,
            caption=f"ğŸ¬ {data.get('title', 'Video')}\n\nâœ… ",
            supports_streaming=True
        )

        await msg.delete()
        os.remove(file_name)

    except Exception as e:
        await msg.edit(f"âŒ Error: {str(e)}")

































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































from pyrogram import filters
from pyrogram.types import Message, InlineKeyboardMarkup, InlineKeyboardButton, InputMediaVideo
from MYANMARMUSIC import app

REPO_VIDEO = "https://files.catbox.moe/9iom66.mp4"

@app.on_message(filters.command(["repo", "source"]))
async def send_repo(_, message: Message):
    await message.reply_video(
        video=REPO_VIDEO,
        caption=(
            "<b>á€™á€„á€ºá€¹á€‚á€œá€¬á€•á€«á€á€„á€ºá€—á€»á€¬áŠ á€’á€«á€€á€á€±á€¬á€· á€€á€»á€½á€”á€ºá€á€±á€¬á€·á€ºá€›á€²á€· á€á€›á€¬á€¸á€á€„á€º Music Bot á€™á€»á€¬á€¸á€–á€¼á€…á€ºá€•á€«á€á€šá€º</b>\n\n"
            "á€šá€á€¯á€œá€­á€¯ Music Bot á€™á€»á€¬á€¸ á€œá€¯á€•á€ºá€†á€±á€¬á€„á€ºá€á€¼á€„á€ºá€¸á€•á€«á€€ á€¡á€±á€¬á€€á€ºá€€ á€•á€±á€¸á€‘á€¬á€¸á€á€±á€¬ Tg ACC á€™á€»á€¬á€¸á€á€½á€„á€º á€†á€€á€ºá€á€½á€šá€ºá€œá€­á€¯á€›á€•á€«á€á€šá€º\n\n"
            "ğŸ¤  Main Channel ğŸ¤ : <a href='https://t.me/myanmarbot_music'>@myanmarbot_music</a>"
        ),
        reply_markup=InlineKeyboardMarkup(
            [
                [
                    InlineKeyboardButton(" Music Bot", url="https://t.me/HANTHAR1999_bot"),
                    InlineKeyboardButton("ğ¶ğ‘Ÿğ‘’ğ‘ğ‘¡ğ‘’ ğµğ‘œğ‘¡", url="https://t.me/Myanmar_Family7")
                ]
            ]
        ),
        supports_streaming=True,
        has_spoiler=True,
    )






































































































































































































































































































































# Â©ï¸ Copyright Reserved - @khithlainhtet  khithlainhtet

# ===========================================
# Â©ï¸ 2026 khithlainhtet (user @khithlainhtet)
# ğŸ”— GitHub : https://github.com/khithlainhtet/MYANMARMUSIC
# ğŸ“¢ Telegram Channel :https://t.me/myanmarbot_music
# ===========================================


# â¤ï¸ Love From myanmarbot_music
